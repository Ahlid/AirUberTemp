@model AirUberProjeto.Models.ClienteViewModels.PerfilViewModel

@{
    ViewBag.Title = "Perfil";
    Layout = "_Layout";
}


<div class="container" style="margin-top: 20px">
    <div class="row">
        <div class="col-md-2">
            <img class="img-thumbnail" src="..\@Model.Cliente.RelativePathImagemPerfil" alt="...">
        </div>
        <div class="col-md-10">
            <h1 class="media-heading">@Model.Cliente.Nome @Model.Cliente.Apelido</h1>
            <a class="btn-link" asp-area="" asp-controller="Cliente" asp-action="EditarPerfil">Editar perfil</a>
            
           
            <label style="display: block; margin-bottom: 0px">Contato</label>
            @Html.Raw(Model.Cliente.Contacto ?? "Nenhum")
           
            <label style="display: block; margin-bottom: 0px">Correio-Eletrónico</label>
            @Model.Cliente.Email
            
            <label style="display: block; margin-bottom: 0px">Estado da conta</label>
            @Html.Raw(Model.Cliente.EmailConfirmed ?
                        "<span class=\"label label-success\">Confirmada</span>" :
                        "<span class=\"label label-warning\" data-placement=\"top\" data-toggle=\"tooltip\" title=\"Um e-mail foi enviado para a sua conta de utilizador. Verifique a sua caixa de correio-eletrónico\">Por confirmar</span>")


        </div>

    </div>
</div>
<div style="margin-top: 20px">
    <div class="col-md-4">

        <div class="panel panel-default" style="margin-bottom: 20px">
            <div class="panel-body">
                <h4 class="text-center">Créditos</h4>
                <ul class="list-group">
                    <li class="list-group-item">
                        <span class="badge">@Html.Raw(Model.Cliente.ContaDeCreditos != null ? Model.Cliente.ContaDeCreditos.JetCashActual.ToString() : "3") JC</span>
                        Créditos atuais
                    </li>
                </ul>

                <div class="btn-group btn-group-justified" role="group" aria-label="...">
                    <a class="btn btn-primary" asp-area="" asp-controller="Cliente" asp-action="EditarPerfil">Comprar créditos</a>
                    <a class="btn btn-primary" asp-area="" asp-controller="Cliente" asp-action="EditarPerfil">Ver transações</a>
                </div>
            </div>
        </div>

    </div>
    <div class="col-md-4">

        <div class="panel panel-default">
            <div class="panel-body">
                <h4 class="text-center">Viagens</h4>

                <ul class="list-group">
                    <li class="list-group-item">
                        <span class="badge">50</span>
                        Viagens efetuadas
                    </li>
                </ul>

                <div class="btn-group btn-group-justified" role="group" aria-label="...">
                    <a class="btn btn-primary" asp-area="" asp-controller="Cliente" asp-action="EditarPerfil">Marcar Viagem</a>
                </div>
            </div>
        </div>
    </div>
    <div class="col-md-4">

        <div class="panel panel-default">
            <div class="panel-body">
                <h4 class="text-center">Notificações</h4>

                @foreach (Notificacao notificacao in Model.Notificacoes)
                {
                    if (!notificacao.Lida)
                    {
                        <div class="alert alert-@notificacao.Tipo alert-dismissable  fade in" style="margin: 1px; padding-top: 3px; padding-bottom: 3px">
                            @notificacao.Mensagem
                            <a href="#" class="close" onclick="marcarLida(@notificacao.NotificacaoId);" data-dismiss="alert" aria-label="close">&times;</a>
                        </div>
                    }
                }

            </div>
        </div>
    </div>
</div>


<script>

    function marcarLida(id) {
        $.ajax({
            type: "POST",
            url: "/Cliente/MarcarNotificacaoLida",
            data: { id: id },
            dataType: "json",
            success: processData,
            error: function () { alert("failed"); }
        });
    }


    function processData(data) {
        console.log("Retirado");
    }


</script>





<script>
    $(document).ready(function(){
        $('[data-toggle="tooltip"]').tooltip();
    });
</script>





