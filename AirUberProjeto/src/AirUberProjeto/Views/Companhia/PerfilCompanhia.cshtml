@model AirUberProjeto.Models.CompanhiaViewModels.PerfilCompanhiaViewModel

@inject SignInManager<ApplicationUser> SignInManager
@inject UserManager<ApplicationUser> UserManager


@{
    ViewBag.Title = "Perfil Companhia";
    Layout = "_Layout";
}

@if (SignInManager.IsSignedIn(User))
{
    <div class="container" style="margin-top: 20px">
        <div class="row">
            <div class="col-md-2">
                <img class="img-thumbnail" src="" alt="...">
            </div>
            <div class="col-md-10">
                <h1 class="media-heading">@Model.Colaborador.Nome @Model.Colaborador.Apelido</h1>

                @if (User.IsInRole(Roles.ROLE_COLABORADOR_ADMIN))   //Apenas um colaborador com permissões pode editar o perfil da companhia
                {
                    <a class="btn-link" asp-area="" asp-controller="Companhia" asp-action="EditarPerfilCompanhia">Editar perfil</a>
                }

                <label style="display: block; margin-bottom: 0px">Contato</label>
                @Html.Raw(Model.Companhia.Contact)

                <label style="display: block; margin-bottom: 0px">Correio-Eletrónico</label>
                @Model.Colaborador.Email

                <label style="display: block; margin-bottom: 0px">Estado da conta</label>
                @Html.Raw(Model.Colaborador.EmailConfirmed ?
                            "<span class=\"label label-success\">Confirmada</span>" :
                            "<span class=\"label label-warning\" data-placement=\"top\" data-toggle=\"tooltip\" title=\"Um e-mail foi enviado para a sua conta de utilizador. Verifique a sua caixa de correio-eletrónico\">Por confirmar</span>")


            </div>

        </div>
    </div>
    <div style="margin-top: 20px">
        <div class="col-md-4">

            <div class="panel panel-default" style="margin-bottom: 20px">
                <div class="panel-body">
                    <h4 class="text-center">Jatos</h4>
                    <ul class="list-group">
                        <li class="list-group-item">
                            <span class="badge">@Html.Raw(Model.Companhia.ListaJatos.Count)</span>
                            Jatos
                        </li>
                        <li class="list-group-item">
                            <span class="badge">@Html.Raw(Model.Companhia.ListaExtras.Count)</span>
                            Extras
                        </li>
                        <li class="list-group-item">
                            <span class="badge">@Html.Raw(Model.Companhia.ListaColaboradores.Count)</span>
                            Colaboradores
                        </li>
                    </ul>

                    <div class="btn-group btn-group-justified" role="group" aria-label="...">
                        <a class="btn btn-primary" asp-area="" asp-controller="Cliente" asp-action="EditarPerfil">Ver Jatos</a>
                    </div>
                </div>
            </div>

        </div>
        <div class="col-md-4">

            <div class="panel panel-default">
                <div class="panel-body">
                    <h4 class="text-center">Viagens</h4>

                    <ul class="list-group">
                        <li class="list-group-item">
                            <span class="badge">@Html.Raw(22)</span>
                            Viagens efetuadas
                        </li>
                        <li class="list-group-item">
                            <span class="badge">@Html.Raw(Model.Companhia.ListaReservas.Count)</span>
                            Pedidos
                        </li>
                    </ul>

                    <div class="btn-group btn-group-justified" role="group" aria-label="...">
                        <a class="btn btn-primary" asp-area="" asp-controller="Cliente" asp-action="EditarPerfil">Ver Pedidos</a>
                    </div>
                </div>
            </div>
        </div>
        <div class="col-md-4">

            <div class="panel panel-default">
                <div class="panel-body">
                    <h4 class="text-center">Notificações</h4>

                    @foreach (Notificacao notificacao in Model.Notificacoes)
                    {
                        if (!notificacao.Lida)
                        {
                            <div class="alert alert-@notificacao.Tipo alert-dismissable  fade in" style="margin: 1px; padding-top: 3px; padding-bottom: 3px">
                                @notificacao.Mensagem
                                <a href="#" class="close" onclick="marcarLida(@notificacao.NotificacaoId);" data-dismiss="alert" aria-label="close">&times;</a>
                            </div>
                        }
                    }
                </div>
            </div>
        </div>
    </div>
}